
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Step 5 -Particle identification Â· ALICE analysis tutorial</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-panels/panels.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-block-align/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../css/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../grid/" />
    
    
    <link rel="prev" href="../track/" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../setup/">
            
                <a href="../setup/">
            
                    
                    Step 1 - Setup the tutorial
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../running/">
            
                <a href="../running/">
            
                    
                    Step 2 - Running the task
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../modify/">
            
                <a href="../modify/">
            
                    
                    Step 3 - Modify the task
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../track/">
            
                <a href="../track/">
            
                    
                    Step 4 -The track loop
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter active" data-level="5.1" data-path="./">
            
                <a href="./">
            
                    
                    Step 5 -Particle identification
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../grid/">
            
                <a href="../grid/">
            
                    
                    Step 6 -Run your code on GRID
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../bonus/">
            
                <a href="../bonus/">
            
                    
                    Bonus content
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="../hints/">
            
                <a href="../hints/">
            
                    
                    Some hints
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Step 5 -Particle identification</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="step-5">Step 5</h1>
<p>In this section, we&#x2019;ll try to identify particles, by using the amount of energy they have lost per distance traveled in the Time Projection Chamber (TPC). Some specific technical information on how to implement this in your task is given at the end of this document, but general steps to follow are explained here. First, the goals. What we want to do is</p>
<ul>
<li><p>identify pions</p>
</li>
<li><p>check how &#x2019;pure&#x2019; our pion sample is</p>
</li>
</ul>
<p>We&#x2019;ll do this by looking at the TPC signal, and seeing how well this signal corresponds to the expected signal for a certain particle species. Look at the figure for clarification, you see lines (the expected signal a particle leaves in the TPC, &#x2018;the hypothesis&#x2019;) and in colors, the actual signals that were deposited.</p>
<p>Start by storing the TPC signals for all charged particles in your events, in a two-dimensional histogram (such as shown in the figure). First follow the &#x2019;technical steps&#x2019; from Sec. 8, and then try to make such a plot.</p>
<p>Hint, you can get this information by doing</p>
<pre><code class="lang-cpp">fYour2DHistogram-&gt;Fill(track-&gt;P(), track-&gt;GetTPCsignal());
</code></pre>
<p>If your histogram is <em>empty</em> after running, try using Filterbit 1 rather than 128.</p>
<p>As a second step, you identify particles, and store only the TPC signal that corresponds to pions. </p>
<h2 id="tips---read-this-first">TIPS - READ THIS FIRST</h2>
<p>To speed things up a bit, the code that you will need for this exercise is given and explained here. </p>
<p>To identify particles, you will add an additional task to your analysis, the &#x2018;PID response&#x2019; task. This task makes sure that parametrizations that we use for e.g. specific energy loss in the TPC are loaded. To add this task to your analysis, open your runAnalysis.C macro, and add the following lines. Make sure that these lines are called <em>before</em> your own task is added to that analysis manager, your task will <em>depend</em> on this task:</p>
<pre><code class="lang-cpp"><span class="hljs-comment">// load the necessary macros</span>
gROOT-&gt;LoadMacro(<span class="hljs-string">&quot;\$ALICE_ROOT/ANALYSIS/macros/AddTaskPIDResponse.C&quot;</span>);
AddTaskPIDResponse();
</code></pre>
<p>As a second step, you&#x2019;ll have to make some changed to the header of our analysis. First, you&#x2019;ll add another class member, which is a pointer to the AliPIDresponse object that we&#x2019;ll use in our class. To do this, remember how you added pointers to histograms earlier in this tutorial, so add</p>
<ul>
<li><p>a <em>forward declaration</em> of the type, i.e. &#x2018;class AliPIDResponse&#x2019;</p>
</li>
<li><p>the pointer itself, i.e. &#x2018;AliPIDResponse* fPIDResponse; //! pid response object&#x2019;</p>
</li>
</ul>
<p>Don&#x2019;t forget to add this new pointer fPIDResponse to the member initialization list in your class constructors (in the .cxx files)!</p>
<p>After making changes to the header, you can add the actual identification routine. This will be done in the implementation of the class. You need to go through a few steps:</p>
<ul>
<li><p>Retrieve the AliPIDResponse object from the analysis manager;</p>
</li>
<li><p>make our poiter &#x2018;fPIDResponse&#x2019; point to the AliPIDResponse object;</p>
</li>
<li><p>include the header for the AliPIDResponse class, so that the compiler knows how it is defined</p>
</li>
</ul>
<p>The code to do this might be a bit difficult to figure out by yourself, so it&#x2019;s given here below</p>
<pre><code class="lang-cpp">AliAnalysisManager *man = AliAnalysisManager::GetAnalysisManager();
<span class="hljs-keyword">if</span> (man) {
    AliInputEventHandler* inputHandler = (AliInputEventHandler*)(man-&gt;GetInputEventHandler());
    <span class="hljs-keyword">if</span> (inputHandler)   fPIDResponse = inputHandler-&gt;GetPIDResponse();
}
</code></pre>
<p>Do you understand</p>
<ul>
<li><p>what happens in each line?</p>
</li>
<li><p>in which function (UserCreateOutputObjects, UserExcec, Terminate, etc) to put this code?</p>
</li>
</ul>
<p>Now that we&#x2019;ve retrieved our PID response object, it&#x2019;s time to use it. To extract information for different particle species, you can use the functions</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">double</span> kaonSignal = fPIDResponse-&gt;NumberOfSigmasTPC(track, AliPID::kKaon);
<span class="hljs-keyword">double</span> pionSignal = fPIDResponse-&gt;NumberOfSigmasTPC(track, AliPID::kPion);
<span class="hljs-keyword">double</span> protonSignal = fPIDResponse-&gt;NumberOfSigmasTPC(track, AliPID::kProton);
</code></pre>
<p>What these functions return you, is a probability that a particle is of a certain type, expressed in standard deviations (<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>&#x3C3;</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">&#x3C3;</span></span></span></span>) . To identify a particle, we&#x2019;ll require that its PIDresponse signal lies <em>withim 3 standard deviations</em> of the expected signal. To check this, you can write a few lines such as</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">if</span> (<span class="hljs-built_in">std</span>::<span class="hljs-built_in">abs</span>(fPIDResponse-&gt;NumberOfSigmasTPC(track, AliPID::kPion)) &lt; <span class="hljs-number">3</span> ) {
  <span class="hljs-comment">// jippy, i&apos;m a pion</span>
};
</code></pre>
<h2 id="end-of-tips---wuhu-done-reading-">END OF TIPS - Wuhu, done reading !</h2>
<p>If you are confident that you&#x2019;ve &#x2019;isolated&#x2019; the pions, create new histograms to store the pion&#x2019;s</p>
<ul>
<li><p>transverse momentum</p>
</li>
<li><p>pseudorapidity</p>
</li>
<li><p>azimuthal angle</p>
</li>
</ul>
<p>Change the centrality of collisions that you accept: select pions in 0-10% centraliy, and 50-60% centrality. Does the number of pions change in the way you would expect them to change ?# PID response</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../track/" class="navigation navigation-prev " aria-label="Previous page: Step 4 -The track loop">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../grid/" class="navigation navigation-next " aria-label="Next page: Step 6 -Run your code on GRID">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Step 5 -Particle identification","level":"5.1","depth":1,"next":{"title":"Step 6 -Run your code on GRID","level":"6.1","depth":1,"path":"grid/README.md","ref":"grid/README.md","articles":[]},"previous":{"title":"Step 4 -The track loop","level":"4.1","depth":1,"path":"track/README.md","ref":"track/README.md","articles":[]},"dir":"ltr"},"config":{"plugins":["katex","panels@git+https://github.com/lhcb/gitbook-plugin-panels.git#master","collapsible-menu","block-align","livereload"],"styles":{"website":"css/website.css"},"pluginsConfig":{"collapsible-menu":{},"livereload":{},"block-align":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"panels":{},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"ALICE analysis tutorial","gitbook":"*","description":"Introduction to the common analysis techniques and tools of ALICE."},"file":{"path":"pid/README.md","mtime":"2017-11-01T09:27:15.858Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-11-01T09:30:47.928Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-panels/panels.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

